import{W as D,r as i,X as Ge,Y as Xe,Z as O,_ as be,a0 as ge,a1 as ie,a2 as le,a3 as Ye,a4 as ze,a5 as ue,a6 as z,a7 as ce,a8 as Ie,a9 as xe,aa as qe,ab as Je,j as r,B as G,ac as Ze,I as C,ad as K,ae as S,i as H,af as A,ag as Qe,ah as Z,ai as Me,aj as te,ak as Be,al as et,am as tt,an as _,ao as ye,u as nt,v as we,n as I,ap as X,S as Ee,aq as $e,ar as rt,as as st,at as ot,z as at}from"./index-BMduUo-e.js";import{u as Q,S as Oe,a as it,b as lt,c as ut,d as je,P as ct}from"./index-CJlXUtkz.js";import{C as dt,I as ft}from"./index-CTW3Zofm.js";import{u as Y}from"./index-ChUOwpXi.js";import{u as B}from"./shortcuts-CgY7Vei-.js";import{S as ne}from"./index-CSrcWjzj.js";import{H as pt}from"./index-B1Vg1Uhv.js";import{I as mt}from"./input-0yNO_Rdy.js";import{E as vt}from"./index-BEAjmx8s.js";import"./index-DBQGxdl2.js";import"./popover-Ig0gGBrk.js";import"./index-B-hPoVZM.js";import"./index-BuHP5LV3.js";import"./index-5fZKSFny.js";import"./index-CkPPVlXA.js";import"./checkbox-CDPHlcmT.js";import"./select-NgJ71qQw.js";import"./label-D0S6d1zR.js";import"./addNewVariableButton-oiOAsQtq.js";import"./index-RP3kj6uB.js";const Se=typeof document<"u"?D.useLayoutEffect:()=>{};function ht(e){const n=i.useRef(null);return Se(()=>{n.current=e},[e]),i.useCallback((...t)=>{const s=n.current;return s==null?void 0:s(...t)},[])}const U=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},F=e=>e&&"window"in e&&e.window===e?e:U(e).defaultView||window;function bt(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function gt(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function xt(){return gt(/^Mac/i)}function yt(){return bt(/Android/i)}function wt(e){return e.mozInputSource===0&&e.isTrusted?!0:yt()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}class Et{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function He(e){let n=i.useRef({isFocused:!1,observer:null});Se(()=>{const s=n.current;return()=>{s.observer&&(s.observer.disconnect(),s.observer=null)}},[]);let t=ht(s=>{e==null||e(s)});return i.useCallback(s=>{if(s.target instanceof HTMLButtonElement||s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement||s.target instanceof HTMLSelectElement){n.current.isFocused=!0;let a=s.target,l=m=>{n.current.isFocused=!1,a.disabled&&t(new Et("blur",m)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};a.addEventListener("focusout",l,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&a.disabled){var m;(m=n.current.observer)===null||m===void 0||m.disconnect();let u=a===document.activeElement?null:document.activeElement;a.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),a.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),n.current.observer.observe(a,{attributes:!0,attributeFilter:["disabled"]})}},[t])}function $t(e){let{isDisabled:n,onFocus:t,onBlur:s,onFocusChange:a}=e;const l=i.useCallback(p=>{if(p.target===p.currentTarget)return s&&s(p),a&&a(!1),!0},[s,a]),m=He(l),u=i.useCallback(p=>{const f=U(p.target);p.target===p.currentTarget&&f.activeElement===p.target&&(t&&t(p),a&&a(!0),m(p))},[a,t,m]);return{focusProps:{onFocus:!n&&(t||a||s)?u:void 0,onBlur:!n&&(s||a)?l:void 0}}}let V=null,re=new Set,W=new Map,L=!1,se=!1;const jt={Tab:!0,Escape:!0};function de(e,n){for(let t of re)t(e,n)}function Tt(e){return!(e.metaKey||!xt()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function q(e){L=!0,Tt(e)&&(V="keyboard",de("keyboard",e))}function k(e){V="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(L=!0,de("pointer",e))}function Ae(e){wt(e)&&(L=!0,V="virtual")}function Ne(e){e.target===window||e.target===document||(!L&&!se&&(V="virtual",de("virtual",e)),L=!1,se=!1)}function Re(){L=!1,se=!0}function oe(e){if(typeof window>"u"||W.get(F(e)))return;const n=F(e),t=U(e);let s=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){L=!0,s.apply(this,arguments)},t.addEventListener("keydown",q,!0),t.addEventListener("keyup",q,!0),t.addEventListener("click",Ae,!0),n.addEventListener("focus",Ne,!0),n.addEventListener("blur",Re,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",k,!0),t.addEventListener("pointermove",k,!0),t.addEventListener("pointerup",k,!0)):(t.addEventListener("mousedown",k,!0),t.addEventListener("mousemove",k,!0),t.addEventListener("mouseup",k,!0)),n.addEventListener("beforeunload",()=>{_e(e)},{once:!0}),W.set(n,{focus:s})}const _e=(e,n)=>{const t=F(e),s=U(e);n&&s.removeEventListener("DOMContentLoaded",n),W.has(t)&&(t.HTMLElement.prototype.focus=W.get(t).focus,s.removeEventListener("keydown",q,!0),s.removeEventListener("keyup",q,!0),s.removeEventListener("click",Ae,!0),t.removeEventListener("focus",Ne,!0),t.removeEventListener("blur",Re,!1),typeof PointerEvent<"u"?(s.removeEventListener("pointerdown",k,!0),s.removeEventListener("pointermove",k,!0),s.removeEventListener("pointerup",k,!0)):(s.removeEventListener("mousedown",k,!0),s.removeEventListener("mousemove",k,!0),s.removeEventListener("mouseup",k,!0)),W.delete(t))};function Ct(e){const n=U(e);let t;return n.readyState!=="loading"?oe(e):(t=()=>{oe(e)},n.addEventListener("DOMContentLoaded",t)),()=>_e(e,t)}typeof document<"u"&&Ct();function We(){return V!=="pointer"}const kt=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Pt(e,n,t){var s;const a=typeof window<"u"?F(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,l=typeof window<"u"?F(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,m=typeof window<"u"?F(t==null?void 0:t.target).HTMLElement:HTMLElement,u=typeof window<"u"?F(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof a&&!kt.has(t==null||(s=t.target)===null||s===void 0?void 0:s.type)||(t==null?void 0:t.target)instanceof l||(t==null?void 0:t.target)instanceof m&&(t==null?void 0:t.target.isContentEditable),!(e&&n==="keyboard"&&t instanceof u&&!jt[t.key])}function Dt(e,n,t){oe(),i.useEffect(()=>{let s=(a,l)=>{Pt(!!(t!=null&&t.isTextInput),a,l)&&e(We())};return re.add(s),()=>{re.delete(s)}},n)}function Ft(e){let{isDisabled:n,onBlurWithin:t,onFocusWithin:s,onFocusWithinChange:a}=e,l=i.useRef({isFocusWithin:!1}),m=i.useCallback(f=>{l.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(l.current.isFocusWithin=!1,t&&t(f),a&&a(!1))},[t,a,l]),u=He(m),p=i.useCallback(f=>{!l.current.isFocusWithin&&document.activeElement===f.target&&(s&&s(f),a&&a(!0),l.current.isFocusWithin=!0,u(f))},[s,a,u]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:p,onBlur:m}}}let J=!1,ee=0;function ae(){J=!0,setTimeout(()=>{J=!1},50)}function Te(e){e.pointerType==="touch"&&ae()}function Lt(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",Te):document.addEventListener("touchend",ae),ee++,()=>{ee--,!(ee>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",Te):document.removeEventListener("touchend",ae))}}function It(e){let{onHoverStart:n,onHoverChange:t,onHoverEnd:s,isDisabled:a}=e,[l,m]=i.useState(!1),u=i.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;i.useEffect(Lt,[]);let{hoverProps:p,triggerHoverEnd:f}=i.useMemo(()=>{let b=(v,g)=>{if(u.pointerType=g,a||g==="touch"||u.isHovered||!v.currentTarget.contains(v.target))return;u.isHovered=!0;let E=v.currentTarget;u.target=E,n&&n({type:"hoverstart",target:E,pointerType:g}),t&&t(!0),m(!0)},x=(v,g)=>{if(u.pointerType="",u.target=null,g==="touch"||!u.isHovered)return;u.isHovered=!1;let E=v.currentTarget;s&&s({type:"hoverend",target:E,pointerType:g}),t&&t(!1),m(!1)},y={};return typeof PointerEvent<"u"?(y.onPointerEnter=v=>{J&&v.pointerType==="mouse"||b(v,v.pointerType)},y.onPointerLeave=v=>{!a&&v.currentTarget.contains(v.target)&&x(v,v.pointerType)}):(y.onTouchStart=()=>{u.ignoreEmulatedMouseEvents=!0},y.onMouseEnter=v=>{!u.ignoreEmulatedMouseEvents&&!J&&b(v,"mouse"),u.ignoreEmulatedMouseEvents=!1},y.onMouseLeave=v=>{!a&&v.currentTarget.contains(v.target)&&x(v,"mouse")}),{hoverProps:y,triggerHoverEnd:x}},[n,t,s,a,u]);return i.useEffect(()=>{a&&f({currentTarget:u.target},u.pointerType)},[a]),{hoverProps:p,isHovered:l}}function Mt(e={}){let{autoFocus:n=!1,isTextInput:t,within:s}=e,a=i.useRef({isFocused:!1,isFocusVisible:n||We()}),[l,m]=i.useState(!1),[u,p]=i.useState(()=>a.current.isFocused&&a.current.isFocusVisible),f=i.useCallback(()=>p(a.current.isFocused&&a.current.isFocusVisible),[]),b=i.useCallback(v=>{a.current.isFocused=v,m(v),f()},[f]);Dt(v=>{a.current.isFocusVisible=v,f()},[],{isTextInput:t});let{focusProps:x}=$t({isDisabled:s,onFocusChange:b}),{focusWithinProps:y}=Ft({isDisabled:!s,onFocusWithinChange:b});return{isFocused:l,isFocusVisible:u,focusProps:s?y:x}}function Ke(e){return Ge.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function Ot(e){let n=e.width/2,t=e.height/2;return{top:e.clientY-t,right:e.clientX+n,bottom:e.clientY+t,left:e.clientX-n}}function St(e,n){return!(!e||!n||e.right<n.left||e.left>n.right||e.bottom<n.top||e.top>n.bottom)}function Ht({disabled:e=!1}={}){let n=i.useRef(null),[t,s]=i.useState(!1),a=Xe(),l=O(()=>{n.current=null,s(!1),a.dispose()}),m=O(u=>{if(a.dispose(),n.current===null){n.current=u.currentTarget,s(!0);{let p=Ke(u.currentTarget);a.addEventListener(p,"pointerup",l,!1),a.addEventListener(p,"pointermove",f=>{if(n.current){let b=Ot(f);s(St(b,n.current.getBoundingClientRect()))}},!1),a.addEventListener(p,"pointercancel",l,!1)}}});return{pressed:t,pressProps:e?{}:{onPointerDown:m,onPointerUp:l,onClick:l}}}function At(e){let n=e.parentElement,t=null;for(;n&&!(n instanceof HTMLFieldSetElement);)n instanceof HTMLLegendElement&&(t=n),n=n.parentElement;let s=(n==null?void 0:n.getAttribute("disabled"))==="";return s&&Nt(t)?!1:s}function Nt(e){if(!e)return!1;let n=e.previousElementSibling;for(;n!==null;){if(n instanceof HTMLLegendElement)return!1;n=n.previousElementSibling}return!0}var M=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(M||{});let Rt=i.createContext(()=>{});function _t({value:e,children:n}){return D.createElement(Rt.Provider,{value:e},n)}function Ce(e){var n;if(e.type)return e.type;let t=(n=e.as)!=null?n:"button";if(typeof t=="string"&&t.toLowerCase()==="button")return"button"}function Wt(e,n){let[t,s]=i.useState(()=>Ce(e));return be(()=>{s(Ce(e))},[e.type,e.as]),be(()=>{t||n.current&&n.current instanceof HTMLButtonElement&&!n.current.hasAttribute("type")&&s("button")},[t,n]),t}var ke;let Kt=(ke=D.startTransition)!=null?ke:function(e){e()};var Ut=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ut||{}),Vt=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(Vt||{});let Gt={0:e=>({...e,disclosureState:ue(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},4(e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},5(e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},2(e,n){return e.buttonId===n.buttonId?e:{...e,buttonId:n.buttonId}},3(e,n){return e.panelId===n.panelId?e:{...e,panelId:n.panelId}}},fe=i.createContext(null);fe.displayName="DisclosureContext";function pe(e){let n=i.useContext(fe);if(n===null){let t=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,pe),t}return n}let me=i.createContext(null);me.displayName="DisclosureAPIContext";function Ue(e){let n=i.useContext(me);if(n===null){let t=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Ue),t}return n}let ve=i.createContext(null);ve.displayName="DisclosurePanelContext";function Xt(){return i.useContext(ve)}function Yt(e,n){return ue(n.type,Gt,e,n)}let zt=i.Fragment;function qt(e,n){let{defaultOpen:t=!1,...s}=e,a=i.useRef(null),l=le(n,Ye(o=>{a.current=o},e.as===void 0||e.as===i.Fragment)),m=i.useRef(null),u=i.useRef(null),p=i.useReducer(Yt,{disclosureState:t?0:1,linkedPanel:!1,buttonRef:u,panelRef:m,buttonId:null,panelId:null}),[{disclosureState:f,buttonId:b},x]=p,y=O(o=>{x({type:1});let h=Ke(a);if(!h||!b)return;let c=o?o instanceof HTMLElement?o:o.current instanceof HTMLElement?o.current:h.getElementById(b):h.getElementById(b);c==null||c.focus()}),v=i.useMemo(()=>({close:y}),[y]),g=i.useMemo(()=>({open:f===0,close:y}),[f,y]),E={ref:l};return D.createElement(fe.Provider,{value:p},D.createElement(me.Provider,{value:v},D.createElement(_t,{value:y},D.createElement(ze,{value:ue(f,{0:z.Open,1:z.Closed})},ce({ourProps:E,theirProps:s,slot:g,defaultTag:zt,name:"Disclosure"})))))}let Jt="button";function Zt(e,n){let t=i.useId(),{id:s=`headlessui-disclosure-button-${t}`,disabled:a=!1,autoFocus:l=!1,...m}=e,[u,p]=pe("Disclosure.Button"),f=Xt(),b=f===null?!1:f===u.panelId,x=i.useRef(null),y=le(x,n,b?null:u.buttonRef),v=Ie();i.useEffect(()=>{if(!b)return p({type:2,buttonId:s}),()=>{p({type:2,buttonId:null})}},[s,p,b]);let g=O(P=>{var R;if(b){if(u.disclosureState===1)return;switch(P.key){case M.Space:case M.Enter:P.preventDefault(),P.stopPropagation(),p({type:0}),(R=u.buttonRef.current)==null||R.focus();break}}else switch(P.key){case M.Space:case M.Enter:P.preventDefault(),P.stopPropagation(),p({type:0});break}}),E=O(P=>{switch(P.key){case M.Space:P.preventDefault();break}}),o=O(P=>{var R;At(P.currentTarget)||a||(b?(p({type:0}),(R=u.buttonRef.current)==null||R.focus()):p({type:0}))}),{isFocusVisible:h,focusProps:c}=Mt({autoFocus:l}),{isHovered:d,hoverProps:j}=It({isDisabled:a}),{pressed:$,pressProps:w}=Ht({disabled:a}),T=i.useMemo(()=>({open:u.disclosureState===0,hover:d,active:$,disabled:a,focus:h,autofocus:l}),[u,d,$,h,a,l]),he=Wt(e,x),Ve=b?xe({ref:y,type:he,disabled:a||void 0,autoFocus:l,onKeyDown:g,onClick:o},c,j,w):xe({ref:y,id:s,type:he,"aria-expanded":u.disclosureState===0,"aria-controls":u.linkedPanel?u.panelId:void 0,disabled:a||void 0,autoFocus:l,onKeyDown:g,onKeyUp:E,onClick:o},c,j,w);return ce({mergeRefs:v,ourProps:Ve,theirProps:m,slot:T,defaultTag:Jt,name:"Disclosure.Button"})}let Qt="div",Bt=ge.RenderStrategy|ge.Static;function en(e,n){let t=i.useId(),{id:s=`headlessui-disclosure-panel-${t}`,...a}=e,[l,m]=pe("Disclosure.Panel"),{close:u}=Ue("Disclosure.Panel"),p=Ie(),f=le(n,l.panelRef,g=>{Kt(()=>m({type:g?4:5}))});i.useEffect(()=>(m({type:3,panelId:s}),()=>{m({type:3,panelId:null})}),[s,m]);let b=qe(),x=b!==null?(b&z.Open)===z.Open:l.disclosureState===0,y=i.useMemo(()=>({open:l.disclosureState===0,close:u}),[l,u]),v={ref:f,id:s};return D.createElement(ve.Provider,{value:l.panelId},ce({mergeRefs:p,ourProps:v,theirProps:a,slot:y,defaultTag:Qt,features:Bt,visible:x,name:"Disclosure.Panel"}))}let tn=ie(qt),nn=ie(Zt),rn=ie(en),N=Object.assign(tn,{Button:nn,Panel:rn});function sn({flow:e,children:n,open:t,setOpen:s}){var v;const a=Je(g=>g.autoLogin),[l,m]=s!==void 0&&t!==void 0?[t,s]:i.useState(!1),[u,p]=i.useState("0"),f=Y(g=>g.activeTweaks),b=Y(g=>g.setActiveTweaks),x=Y(g=>g.tabs),y=Y(g=>g.initialSetup);return i.useEffect(()=>{l&&y(a,e)},[l,(v=e==null?void 0:e.data)==null?void 0:v.nodes]),i.useEffect(()=>{p("0")},[l]),r.jsxs(G,{open:l,setOpen:m,children:[r.jsx(G.Trigger,{asChild:!0,children:n}),r.jsxs(G.Header,{description:Ze,children:[r.jsx("span",{className:"pr-2",children:"API"}),r.jsx(C,{name:"Code2",className:"h-6 w-6 pl-1 text-gray-800 dark:text-white","aria-hidden":"true"})]}),r.jsx(G.Content,{overflowHidden:!0,children:r.jsx(dt,{open:l,tabs:x,activeTab:u,setActiveTab:p,activeTweaks:f,setActiveTweaks:b})})]})}function on(){const[n,t]=i.useState(!1),[s,a]=i.useState(!1),[l,m]=i.useState(!1);function u(d){Z()&&!s||a(j=>!j)}function p(d){Z()&&!n||K.getState().hasIO&&t(j=>!j)}function f(d){Z()&&!l||m(j=>!j)}const b=B(d=>d.open),x=B(d=>d.api),y=B(d=>d.flow);Q(b,p,{preventDefault:!0}),Q(x,u,{preventDefault:!0}),Q(y,f,{preventDefault:!0});const v=K(d=>d.hasIO),g=S(d=>d.hasStore),E=S(d=>d.validApiKey),o=S(d=>d.hasApiKey),h=H(d=>d.currentFlow);i.useRef();const c=i.useMemo(()=>r.jsx(Oe,{is_component:!1,component:h,disabled:!o||!E||!g,open:l,setOpen:m,children:r.jsxs("button",{disabled:!o||!E||!g,className:A("relative inline-flex h-full w-full items-center justify-center gap-[4px] bg-muted px-5 py-3 text-sm font-semibold text-foreground transition-all duration-150 ease-in-out hover:bg-background hover:bg-hover",!o||!E||!g?"button-disable text-muted-foreground":""),"data-testid":"shared-button-flow",children:[r.jsx(C,{name:"Share3",className:A("-m-0.5 -ml-1 h-6 w-6",!o||!E||!g?"extra-side-bar-save-disable":"")}),"Share"]})}),[o,E,h,g,l,m]);return r.jsx(r.Fragment,{children:r.jsx(Qe,{show:!0,appear:!0,enter:"transition ease-out duration-300",enterFrom:"translate-y-96",enterTo:"translate-y-0",leave:"transition ease-in duration-300",leaveFrom:"translate-y-0",leaveTo:"translate-y-96",children:r.jsx("div",{className:"shadow-round-btn-shadow hover:shadow-round-btn-shadow message-button-position flex items-center justify-center gap-7 rounded-sm border bg-muted shadow-md transition-all",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex h-full w-full gap-1 rounded-sm transition-all",children:v?r.jsx(ft,{open:n,setOpen:t,disable:!v,children:r.jsxs("div",{className:"relative inline-flex w-full items-center justify-center gap-1 px-5 py-3 text-sm font-semibold transition-all duration-500 ease-in-out hover:bg-hover",children:[r.jsx(C,{name:"BotMessageSquareIcon",className:"h-5 w-5 transition-all"}),"Playground"]})}):r.jsxs("div",{className:"relative inline-flex w-full cursor-not-allowed items-center justify-center gap-1 px-5 py-3 text-sm font-semibold text-muted-foreground transition-all duration-150 ease-in-out",children:[r.jsx(C,{name:"BotMessageSquareIcon",className:"h-5 w-5 transition-all"}),"Playground"]})}),r.jsx("div",{children:r.jsx(ne,{orientation:"vertical"})}),r.jsx("div",{className:"flex cursor-pointer items-center gap-2",children:h&&h.data&&r.jsx(sn,{flow:h,open:s,setOpen:a,children:r.jsxs("div",{className:A("relative inline-flex w-full items-center justify-center gap-1 px-5 py-3 text-sm font-semibold text-foreground transition-all duration-150 ease-in-out hover:bg-hover"),children:[r.jsx(C,{name:"Code2",className:"h-5 w-5"}),"API"]})})}),r.jsx("div",{children:r.jsx(ne,{orientation:"vertical"})}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("div",{className:`side-bar-button ${!o||!E||!g?"cursor-not-allowed":"cursor-pointer"}`,children:c})})]})})})})}function Pe({button:{title:e,Icon:n,buttons:t=[]},isChild:s=!0,children:a,defaultOpen:l}){return r.jsx(N,{as:"div",defaultOpen:l,children:({open:m})=>r.jsxs(r.Fragment,{children:[r.jsx("div",{children:r.jsxs(N.Button,{className:s?"components-disclosure-arrangement-child":"components-disclosure-arrangement","data-testid":`disclosure-${e.toLocaleLowerCase()}`,children:[r.jsxs("div",{className:"flex gap-4"+(s?" pl-2":""),children:[r.jsx(n,{strokeWidth:1.5,size:22,className:"text-primary"}),r.jsx("span",{className:"components-disclosure-title",children:e})]}),r.jsxs("div",{className:"components-disclosure-div",children:[t.map((u,p)=>r.jsx("button",{onClick:u.onClick,children:u.Icon},p)),r.jsx("div",{children:r.jsx(C,{name:"ChevronRight",className:`${m||l?"rotate-90 transform":""} h-4 w-4 text-foreground`})})]})]})}),r.jsx(N.Panel,{as:"div",children:a})]})},e)}function an({button:{title:e,Icon:n,buttons:t=[]},children:s,defaultOpen:a,testId:l}){return r.jsx(N,{as:"div",defaultOpen:a,children:({open:m})=>r.jsxs(r.Fragment,{children:[r.jsx("div",{children:r.jsxs(N.Button,{className:"parent-disclosure-arrangement","data-testid":l,children:[r.jsxs("div",{className:"flex items-baseline gap-1 align-baseline",children:[r.jsx("span",{className:"parent-disclosure-title",children:e}),e==="Experimental"&&r.jsx("div",{className:"h-fit rounded-full bg-beta-background px-2 py-1 text-xs/3 font-semibold text-beta-foreground-soft",children:"BETA"})]}),r.jsxs("div",{className:"components-disclosure-div",children:[t.map((u,p)=>r.jsx("button",{onClick:u.onClick,children:u.Icon},p)),r.jsx("div",{children:r.jsx(C,{name:"ChevronsUpDownIcon",className:" h-4 w-4 text-foreground"})})]})]})}),r.jsx(N.Panel,{as:"div",children:s})]})},e)}const ln=i.forwardRef(({sectionName:e,display_name:n,itemName:t,error:s,color:a,onDragStart:l,apiClass:m,official:u},p)=>{const[f,b]=i.useState(!1),x=H(c=>c.deleteComponent),y=Me(c=>c.version),[v,g]=i.useState({x:0,y:0}),E=i.useRef(null),o=c=>{var d;if(!f){const j=((d=E.current)==null?void 0:d.getBoundingClientRect())??{left:0,top:0};g({x:c.clientX-j.left,y:c.clientY-j.top})}};function h(c){switch(c){case"share":break;case"download":const d=te(t);Be(et({id:tt(d),type:d,node:m},y));break;case"delete":x(n);break}}return r.jsx(it,{onValueChange:h,onOpenChange:c=>b(c),open:f,children:r.jsx("div",{onPointerDown:o,onContextMenuCapture:c=>{c.preventDefault(),b(!0)},"data-tooltip-id":t,children:r.jsx("div",{draggable:!s,className:"side-bar-components-border bg-background"+(s?" cursor-not-allowed select-none":""),style:{borderLeftColor:a},onDragStart:l,onDragEnd:()=>{document.body.removeChild(document.getElementsByClassName("cursor-grabbing")[0])},children:r.jsxs("div",{"data-testid":e+n,id:e+n,className:"side-bar-components-div-form",children:[r.jsx("span",{className:"side-bar-components-text",children:n}),r.jsxs("div",{ref:E,children:[r.jsx(C,{name:"Menu",className:"side-bar-components-icon"}),r.jsx(lt,{}),r.jsxs(ut,{position:"popper",side:"bottom",sideOffset:-25,style:{position:"absolute",left:v.x,top:v.y},children:[r.jsxs(je,{value:"download",children:[r.jsxs("div",{className:"flex",children:[r.jsx(C,{name:"Download",className:"relative top-0.5 mr-2 h-4 w-4"})," ","Download"," "]})," "]}),!u&&r.jsxs(je,{value:"delete",children:[r.jsxs("div",{className:"flex",children:[r.jsx(C,{name:"Trash2",className:"relative top-0.5 mr-2 h-4 w-4"})," ","Delete"," "]})," "]})]})]})]})})},t)},t)}),De=ln;function Fe(e,n){const t=_.indexOf(e.toLowerCase()),s=_.indexOf(n.toLowerCase());return t!==-1&&s!==-1?t-s:t!==-1?-1:s!==-1?1:e.localeCompare(n)}function Le(e,n){const t=/(.+) \((\w+)\)/,s=e.match(t),a=n.match(t);if(s&&a){const l=s[1],m=a[1];if(l!==m)return l.localeCompare(m);const u=parseInt(s[2]),p=parseInt(a[2]);return u-p}else return e.localeCompare(n)}function un(){const e=ye(o=>o.data),n=ye(o=>o.templates),t=K(o=>o.getFilterEdge),s=K(o=>o.setFilterEdge),a=H(o=>o.currentFlow),l=S(o=>o.hasStore),m=S(o=>o.hasApiKey),u=S(o=>o.validApiKey),p=nt(o=>o.setErrorData),[f,b]=i.useState(e),[x,y]=i.useState("");function v(o,h){var c=o.currentTarget.cloneNode(!0);c.style.position="absolute",c.style.top="-500px",c.style.right="-500px",c.classList.add("cursor-grabbing"),document.body.appendChild(c),o.dataTransfer.setDragImage(c,0,0),o.dataTransfer.setData("nodedata",JSON.stringify(h))}function g(o){if(o===""){b(e);return}b(h=>{let c={};return Object.keys(e).forEach((d,j)=>{c[d]={},Object.keys(e[d]).filter(w=>{var T;return w.toLowerCase().includes(o.toLowerCase())||((T=e[d][w].display_name)==null?void 0:T.toLowerCase().includes(o.toLowerCase()))}).forEach(w=>{c[d][w]=e[d][w]})}),c})}i.useEffect(()=>{let o=[];Object.keys(n).forEach(h=>{n[h].error&&o.push(h)}),o.length>0&&p({title:" Components with errors: ",list:o})},[]);function E(){(!x&&x===""||x==="search")&&(b(e),s([]),y(""))}return i.useEffect(()=>{t.length!==0&&y(""),t.length===0&&x===""&&(y(""),b(e))},[t,e]),i.useEffect(()=>{g(x)},[e]),i.useEffect(()=>{(t==null?void 0:t.length)>0&&b(o=>{let h=we.cloneDeep(e),c={};return Object.keys(h).forEach((d,j)=>{if(c[d]={},t.some($=>$.family===d)){c[d]=h[d];const $=t.filter(w=>w.family===d).pop().type.split(",");for(let w=0;w<$.length;w++)$[w]=$[w].trimStart();if($.some(w=>w!=="")){let w=Object.keys(h[d]).filter(T=>$.includes(T));Object.keys(h[d]).forEach(T=>{w.includes(T)||delete c[d][T]})}}}),y(""),c})},[t]),i.useEffect(()=>{(t==null?void 0:t.length)>0&&b(o=>{let h=we.cloneDeep(e),c={};return Object.keys(h).forEach((d,j)=>{if(c[d]={},t.some($=>$.family===d)){c[d]=h[d];const $=t.filter(w=>w.family===d).pop().type.split(",");for(let w=0;w<$.length;w++)$[w]=$[w].trimStart();if($.some(w=>w!=="")){let w=Object.keys(h[d]).filter(T=>$.includes(T));Object.keys(h[d]).forEach(T=>{w.includes(T)||delete c[d][T]})}}}),y(""),c})},[t,e]),i.useMemo(()=>r.jsx(Oe,{is_component:!1,component:a,disabled:!m||!u||!l,children:r.jsxs("button",{disabled:!m||!u||!l,className:A("extra-side-bar-buttons gap-[4px] text-sm font-semibold",!m||!u||!l?"button-disable cursor-default text-muted-foreground":""),children:[r.jsx(C,{name:"Share3",className:A("-m-0.5 -ml-1 h-6 w-6",!m||!u||!l?"extra-side-bar-save-disable":"")}),"Share"]})}),[m,u,a,l]),i.useMemo(()=>r.jsx(vt,{children:r.jsx("button",{className:A("extra-side-bar-buttons"),children:r.jsx(C,{name:"FileDown",className:"side-bar-button-size"})})}),[]),i.useMemo(()=>o=>{if(I[o])return r.jsx(C,{name:o,strokeWidth:1.5,className:"w-[22px] text-primary"})},[]),r.jsxs("div",{className:"side-bar-arrangement",children:[r.jsxs("div",{className:"side-bar-search-div-placement",children:[r.jsx(mt,{onFocusCapture:()=>E(),value:x,type:"text",name:"search",id:"search",placeholder:"Search",className:"nopan nodelete nodrag noflow input-search",onChange:o=>{g(o.target.value),y(o.target.value)},autocomplete:"off",readonly:"readonly",onClick:()=>document.getElementById("search").removeAttribute("readonly")}),r.jsx("div",{className:"search-icon",onClick:()=>{x&&(b(e),y(""))},children:r.jsx(C,{name:x?"X":"Search",className:`h-5 w-5 stroke-[1.5] text-primary ${x?"cursor-pointer":"cursor-default"}`,"aria-hidden":"true"})})]}),r.jsx(ne,{}),r.jsxs("div",{className:"side-bar-components-div-arrangement",children:[r.jsx("div",{className:"parent-disclosure-arrangement",children:r.jsx("div",{className:"flex items-center gap-4 align-middle",children:r.jsx("span",{className:"parent-disclosure-title",children:"Components"})})}),Object.keys(f).sort(Fe).filter(o=>_.includes(o)).map((o,h)=>Object.keys(f[o]).length>0?r.jsx(Pe,{defaultOpen:t.length!==0||x.length!==0,isChild:!1,button:{title:X[o]??X.unknown,Icon:I[o]??I.unknown},children:r.jsx("div",{className:"side-bar-components-gap",children:Object.keys(f[o]).sort((c,d)=>Le(f[o][c].display_name,f[o][d].display_name)).map((c,d)=>r.jsx(Ee,{content:f[o][c].display_name,side:"right",children:r.jsx(De,{sectionName:o,apiClass:f[o][c],onDragStart:j=>v(j,{type:te(c),node:f[o][c]}),color:$e[o],itemName:c,error:!!f[o][c].error,display_name:f[o][c].display_name,official:f[o][c].official!==!1},d+c)},d))})},h+x+JSON.stringify(t)):r.jsx("div",{},h))," ",r.jsx(an,{defaultOpen:x.length!==0||t.length!==0,button:{title:"Experimental",Icon:I.unknown},testId:"extended-disclosure",children:Object.keys(f).sort(Fe).filter(o=>!_.includes(o)).map((o,h)=>Object.keys(f[o]).length>0?r.jsxs(i.Fragment,{children:[r.jsx(Pe,{isChild:!1,defaultOpen:t.length!==0||x.length!==0,button:{title:X[o]??X.unknown,Icon:I[o]??I.unknown},children:r.jsx("div",{className:"side-bar-components-gap",children:Object.keys(f[o]).sort((c,d)=>Le(f[o][c].display_name,f[o][d].display_name)).map((c,d)=>r.jsx(Ee,{content:f[o][c].display_name,side:"right",children:r.jsx(De,{sectionName:o,apiClass:f[o][c],onDragStart:j=>v(j,{type:te(c),node:f[o][c]}),color:$e[o],itemName:c,error:!!f[o][c].error,display_name:f[o][c].display_name,official:f[o][c].official!==!1},d)},d))})}),h===Object.keys(f).length-_.length+1&&r.jsx(r.Fragment,{children:r.jsxs("a",{target:"_blank",href:"https://langflow.store",className:"components-disclosure-arrangement",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx(rt,{strokeWidth:1.5,className:"w-[22px] text-primary"}),r.jsx("span",{className:"components-disclosure-title",children:"Discover More"})]}),r.jsx("div",{className:"components-disclosure-div",children:r.jsx("div",{children:r.jsx(st,{className:"h-4 w-4 text-foreground"})})})]})})]},`DisclosureComponent${h+x+JSON.stringify(t)}`):r.jsx("div",{},h))},`${x.length!==0}-${t.length!==0}-Advanced`)]})]})}function Fn({view:e}){const n=H(p=>p.setCurrentFlowId),t=Me(p=>p.version),s=K(p=>p.setOnFlowPage),a=H(p=>p.currentFlow),{id:l}=ot(),m=at(),u=H(p=>p.flows);return i.useEffect(()=>{if(!u.some(f=>f.id===l)){m("/all");return}return n(l),s(!0),()=>{s(!1)}},[l]),r.jsxs(r.Fragment,{children:[r.jsx(pt,{}),r.jsxs("div",{className:"flow-page-positioning",children:[a&&r.jsxs("div",{className:"flex h-full overflow-hidden",children:[!e&&r.jsx(un,{}),r.jsxs("main",{className:"flex flex-1",children:[r.jsx("div",{className:"h-full w-full",children:r.jsx(ct,{flow:a})}),!e&&r.jsx(on,{})]})]}),r.jsxs("a",{target:"_blank",href:"https://medium.com/logspace/langflow-datastax-better-together-1b7462cebc4d",className:"langflow-page-icon",children:[t&&r.jsx("div",{className:"mt-1",children:"Langflow ü§ù DataStax"}),r.jsxs("div",{className:t?"mt-2":"mt-1",children:["‚õìÔ∏è v",t]})]})]})]})}export{Fn as default};
