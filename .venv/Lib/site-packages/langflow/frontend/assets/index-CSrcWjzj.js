import{br as L,W as g,bx as y,j as p,bo as j,r as s,bs as Q,cp as X,bu as M,bv as w,bt as Z,c as ee}from"./index-BMduUo-e.js";function te(e){const t=e+"CollectionProvider",[c,r]=L(t),[v,m]=c(t,{collectionRef:{current:null},itemMap:new Map}),b=f=>{const{scope:o,children:i}=f,d=g.useRef(null),n=g.useRef(new Map).current;return p.jsx(v,{scope:o,itemMap:n,collectionRef:d,children:i})};b.displayName=t;const R=e+"CollectionSlot",I=g.forwardRef((f,o)=>{const{scope:i,children:d}=f,n=m(R,i),a=y(o,n.collectionRef);return p.jsx(j,{ref:a,children:d})});I.displayName=R;const u=e+"CollectionItemSlot",x="data-radix-collection-item",S=g.forwardRef((f,o)=>{const{scope:i,children:d,...n}=f,a=g.useRef(null),F=y(o,a),T=m(u,i);return g.useEffect(()=>(T.itemMap.set(a,{ref:a,...n}),()=>void T.itemMap.delete(a))),p.jsx(j,{[x]:"",ref:F,children:d})});S.displayName=u;function C(f){const o=m(e+"CollectionConsumer",f);return g.useCallback(()=>{const d=o.collectionRef.current;if(!d)return[];const n=Array.from(d.querySelectorAll(`[${x}]`));return Array.from(o.itemMap.values()).sort((T,A)=>n.indexOf(T.ref.current)-n.indexOf(A.ref.current))},[o.collectionRef,o.itemMap])}return[{Provider:b,Slot:I,ItemSlot:S},C,r]}var oe=s.createContext(void 0);function re(e){const t=s.useContext(oe);return e||t||"ltr"}var _="rovingFocusGroup.onEntryFocus",ne={bubbles:!1,cancelable:!0},N="RovingFocusGroup",[O,k,se]=te(N),[ce,Ee]=L(N,[se]),[ae,ie]=ce(N),K=s.forwardRef((e,t)=>p.jsx(O.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(O.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(ue,{...e,ref:t})})}));K.displayName=N;var ue=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:c,orientation:r,loop:v=!1,dir:m,currentTabStopId:b,defaultCurrentTabStopId:R,onCurrentTabStopIdChange:I,onEntryFocus:u,preventScrollOnEntryFocus:x=!1,...S}=e,C=s.useRef(null),f=y(t,C),o=re(m),[i=null,d]=Q({prop:b,defaultProp:R,onChange:I}),[n,a]=s.useState(!1),F=X(u),T=k(c),A=s.useRef(!1),[$,P]=s.useState(0);return s.useEffect(()=>{const l=C.current;if(l)return l.addEventListener(_,F),()=>l.removeEventListener(_,F)},[F]),p.jsx(ae,{scope:c,orientation:r,dir:o,loop:v,currentTabStopId:i,onItemFocus:s.useCallback(l=>d(l),[d]),onItemShiftTab:s.useCallback(()=>a(!0),[]),onFocusableItemAdd:s.useCallback(()=>P(l=>l+1),[]),onFocusableItemRemove:s.useCallback(()=>P(l=>l-1),[]),children:p.jsx(M.div,{tabIndex:n||$===0?-1:0,"data-orientation":r,...S,ref:f,style:{outline:"none",...e.style},onMouseDown:w(e.onMouseDown,()=>{A.current=!0}),onFocus:w(e.onFocus,l=>{const H=!A.current;if(l.target===l.currentTarget&&H&&!n){const D=new CustomEvent(_,ne);if(l.currentTarget.dispatchEvent(D),!D.defaultPrevented){const h=T().filter(E=>E.focusable),q=h.find(E=>E.active),W=h.find(E=>E.id===i),J=[q,W,...h].filter(Boolean).map(E=>E.ref.current);B(J,x)}}A.current=!1}),onBlur:w(e.onBlur,()=>a(!1))})})}),U="RovingFocusGroupItem",z=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:c,focusable:r=!0,active:v=!1,tabStopId:m,...b}=e,R=Z(),I=m||R,u=ie(U,c),x=u.currentTabStopId===I,S=k(c),{onFocusableItemAdd:C,onFocusableItemRemove:f}=u;return s.useEffect(()=>{if(r)return C(),()=>f()},[r,C,f]),p.jsx(O.ItemSlot,{scope:c,id:I,focusable:r,active:v,children:p.jsx(M.span,{tabIndex:x?0:-1,"data-orientation":u.orientation,...b,ref:t,onMouseDown:w(e.onMouseDown,o=>{r?u.onItemFocus(I):o.preventDefault()}),onFocus:w(e.onFocus,()=>u.onItemFocus(I)),onKeyDown:w(e.onKeyDown,o=>{if(o.key==="Tab"&&o.shiftKey){u.onItemShiftTab();return}if(o.target!==o.currentTarget)return;const i=de(o,u.orientation,u.dir);if(i!==void 0){if(o.metaKey||o.ctrlKey||o.altKey||o.shiftKey)return;o.preventDefault();let n=S().filter(a=>a.focusable).map(a=>a.ref.current);if(i==="last")n.reverse();else if(i==="prev"||i==="next"){i==="prev"&&n.reverse();const a=n.indexOf(o.currentTarget);n=u.loop?pe(n,a+1):n.slice(a+1)}setTimeout(()=>B(n))}})})})});z.displayName=U;var le={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function de(e,t,c){const r=fe(e.key,c);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return le[r]}function B(e,t=!1){const c=document.activeElement;for(const r of e)if(r===c||(r.focus({preventScroll:t}),document.activeElement!==c))return}function pe(e,t){return e.map((c,r)=>e[(t+r)%e.length])}var ge=K,xe=z,me="Separator",G="horizontal",ve=["horizontal","vertical"],V=s.forwardRef((e,t)=>{const{decorative:c,orientation:r=G,...v}=e,m=Ie(r)?r:G,R=c?{role:"none"}:{"aria-orientation":m==="vertical"?m:void 0,role:"separator"};return p.jsx(M.div,{"data-orientation":m,...R,...v,ref:t})});V.displayName=me;function Ie(e){return ve.includes(e)}var Y=V;const Re=s.forwardRef(({className:e,orientation:t="horizontal",decorative:c=!0,...r},v)=>p.jsx(Y,{ref:v,decorative:c,orientation:t,className:ee("shrink-0 bg-ring/40",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Re.displayName=Y.displayName;function Se(e){const t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}export{xe as I,ge as R,Re as S,Ee as a,Se as b,te as c,re as u};
